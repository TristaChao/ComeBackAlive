# 倉庫系統設計文檔 (Warehouse System Design)

這份文件總結了我們對於倉庫系統的設計共識，以供未來開發參考。

## 1. 核心功能

提供一個讓玩家可以在「頰囊 (Pouch)」和「倉庫 (Warehouse)」之間轉移物品的介面。

## 2. UI 介面佈局

- **整體結構:** 介面為左右分割畫面。
  - **左側區域:** 顯示玩家的「頰囊」物品。
  - **右側區域:** 顯示「倉庫」的物品。
- **開啟/關閉:** 玩家與特定物件互動（例如一個箱子）時開啟此介面。

## 3. 互動邏輯

- **開啟/關閉介面:**
  - **開啟:** 與倉庫物件互動時開啟。
  - **關閉:** 按下 `Escape` 鍵 (`ui_cancel`) 關閉整個倉庫介面。

- **焦點控制 (Focus Control):**
  - 採用 **方案A**：使用一個專門的按鍵 (例如鍵盤 `Tab` 鍵或手把 `L1/R1`) 來切換操作焦點。
  - 焦點可以在「左側頰囊區域」和「右側倉庫區域」之間切換。
  - 當前擁有焦點的區域會有一個更亮的邊框或其他視覺提示，讓玩家清楚知道目前正在操作哪一邊。

- **移動選擇框:**
  - 玩家使用**方向鍵** (上/下/左/右) 在**當前擁有焦點**的區域內移動選擇框。

- **轉移物品:**
  - 在任一區域選中一個物品後，按下 `E` 鍵 (`interact`) 會將該物品移動到另一個區域的空格子中。

## 4. 邊界條件與錯誤處理 (Edge Cases)

- **目標容器已滿:**
  - **從頰囊 → 倉庫:** 如果倉庫已滿，物品將無法轉移。畫面上會顯示提示文字：「**放不進去**」。
  - **從倉庫 → 頰囊:** 如果頰囊已滿，物品將無法轉移。畫面上會顯示提示文字：「**拿不出來**」。

## 5. 資料模型 (Data Model)

- **位置:** 所有倉庫相關的資料將儲存在 `GameState.gd` 中。
- **新增變數:**
  - `const WAREHOUSE_CAPACITY := 20` (或其他數值): 用於定義倉庫的最大容量。
  - `var warehouse: Array[ItemData] = []`: 一個陣列，用於儲存倉庫中所有的物品實例。
