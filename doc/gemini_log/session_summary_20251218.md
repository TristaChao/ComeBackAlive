# Session Summary - 2025-12-18

這份文件是為了幫助下一次的開發工作能快速進入狀況。

---

## 1. 優先閱讀文件列表

請在開始工作前，優先閱讀以下按重要性排序的設計文件，以了解遊戲的完整設計和當前狀態。

1.  **`doc/design/recipes_design.md`**: 最新的核心玩法設計，定義了所有食譜、料理工具、餐具規則和未來的套餐系統。
2.  **`doc/design/recipes_design_detail.md`**: 上一份文件的詳細補充，提供了每個食譜的詳細製作步驟。
3.  **`doc/working_log/working_log_20251217.md`**: 昨天的開發日誌，可了解專案的演變。
4.  **`doc/design/warehouse_system_design.md`**: 倉庫系統的設計（大部分已實作）。
5.  **`doc/design/mouse_home_demo_plan.md`**: 專案最原始的企劃案。

---

## 2. 當前專案架構核心

*   **`ItemDatabase.gd`**: 專案的核心是位於 `scripts/` 下的 `ItemDatabase.gd`。它被設定為 **Autoload (全域單例)**。
    *   `DATA` 常數：定義了遊戲中**所有物品**的屬性（名稱、貼圖路徑、是否可食用、菜系、類型）。
    *   `..._RECIPES` 常數：定義了所有料理工具（砧板、煮鍋、烤台、櫃台）的食譜。
    *   `create_item(id)` 靜態函式：是遊戲中建立新物品的唯一入口。

---

## 3. 今日 (12/18) 開發進度總結

#### **已完成：**

1.  **核心架構升級 (ItemDatabase):**
    *   成功設計並實作了全域的 `ItemDatabase.gd` 來統一管理所有物品和食譜。

2.  **新料理工具實作:**
    *   **砧板 (Chopping Board):** 已能根據資料庫食譜，智慧地處理食材（例如，只切生牛肉，不切熟牛排）。
    *   **煮鍋 (Stove):** 已能處理「序列料理」（例如製作蘑菇醬汁），並允許玩家將半成品放回鍋中。

3.  **舊有物件重構與升級:**
    *   **烤台 (Grill):** 已重構為從 `ItemDatabase` 讀取食譜，修復了「水烤牛排」的 Bug。
    *   **櫃台 (Counter):** 已升級完畢，能處理靈活的、對稱的「組合料理」（例如裝盤、淋上醬汁）。

4.  **遊戲設計完善:**
    *   確立了 `is_edible` 標籤和「必須裝盤才能吃」的「文明鼠」規則。
    *   為盤子/碗設計了「混合堆疊」的機制（但尚未實作）。

#### **未完成/下一步的目標：**

*   **實作「裝潢模式」。**
*   **實作「堆疊」機制：** 櫃台目前還不能堆疊盤子。
*   **建立新的資源點家具：** 例如 `水槽 (Sink)`、`碗盤櫃 (Plate Cabinet)` 等。
*   **更新所有圖片資源：** 目前仍有許多物品使用暫時的圖示。
*   **實作「吃」的動作與「Buff 系統」。**
